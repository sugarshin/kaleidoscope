/*!
 * @license kaleidoscope v0.0.1
 * (c) 2015 sugarshin https://github.com/sugarshin
 * License: MIT
 */
!function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t){var e,r,n,i;e=t("./fileread"),r=t("./kaleidoscope"),i=document.getElementById("file"),n=new e(i),n.on("input:change",function(t){return n.setImgSrc(t).then(function(t){var e,n,i,o,s,a;return r.isRun()&&(o=document.getElementById("result"),o.innerHTML=""),n=document.createElement("img"),s=t[0].getImgSrc(),n.src=s[s.length-1],void 0!==window.ontouchstart?(a=window.screen.availWidth/2,e=window.screen.availHeight/2):(a=window.innerWidth/2,e=window.innerHeight/2),i=new r({image:n,slices:10,radius:Math.min(a,e)}),i.initStyle().render()})})},{"./fileread":41,"./kaleidoscope":42}],2:[function(t,e,r){(function(){var t=this,n=t._,i=Array.prototype,o=Object.prototype,s=Function.prototype,a=i.push,u=i.slice,c=i.concat,l=o.toString,h=o.hasOwnProperty,f=Array.isArray,p=Object.keys,d=s.bind,_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};"undefined"!=typeof r?("undefined"!=typeof e&&e.exports&&(r=e.exports=_),r._=_):t._=_,_.VERSION="1.7.0";var v=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)}}return function(){return t.apply(e,arguments)}};_.iteratee=function(t,e,r){return null==t?_.identity:_.isFunction(t)?v(t,e,r):_.isObject(t)?_.matches(t):_.property(t)},_.each=_.forEach=function(t,e,r){if(null==t)return t;e=v(e,r);var n,i=t.length;if(i===+i)for(n=0;i>n;n++)e(t[n],n,t);else{var o=_.keys(t);for(n=0,i=o.length;i>n;n++)e(t[o[n]],o[n],t)}return t},_.map=_.collect=function(t,e,r){if(null==t)return[];e=_.iteratee(e,r);for(var n,i=t.length!==+t.length&&_.keys(t),o=(i||t).length,s=Array(o),a=0;o>a;a++)n=i?i[a]:a,s[a]=e(t[n],n,t);return s};var y="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(t,e,r,n){null==t&&(t=[]),e=v(e,n,4);var i,o=t.length!==+t.length&&_.keys(t),s=(o||t).length,a=0;if(arguments.length<3){if(!s)throw new TypeError(y);r=t[o?o[a++]:a++]}for(;s>a;a++)i=o?o[a]:a,r=e(r,t[i],i,t);return r},_.reduceRight=_.foldr=function(t,e,r,n){null==t&&(t=[]),e=v(e,n,4);var i,o=t.length!==+t.length&&_.keys(t),s=(o||t).length;if(arguments.length<3){if(!s)throw new TypeError(y);r=t[o?o[--s]:--s]}for(;s--;)i=o?o[s]:s,r=e(r,t[i],i,t);return r},_.find=_.detect=function(t,e,r){var n;return e=_.iteratee(e,r),_.some(t,function(t,r,i){return e(t,r,i)?(n=t,!0):void 0}),n},_.filter=_.select=function(t,e,r){var n=[];return null==t?n:(e=_.iteratee(e,r),_.each(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n)},_.reject=function(t,e,r){return _.filter(t,_.negate(_.iteratee(e)),r)},_.every=_.all=function(t,e,r){if(null==t)return!0;e=_.iteratee(e,r);var n,i,o=t.length!==+t.length&&_.keys(t),s=(o||t).length;for(n=0;s>n;n++)if(i=o?o[n]:n,!e(t[i],i,t))return!1;return!0},_.some=_.any=function(t,e,r){if(null==t)return!1;e=_.iteratee(e,r);var n,i,o=t.length!==+t.length&&_.keys(t),s=(o||t).length;for(n=0;s>n;n++)if(i=o?o[n]:n,e(t[i],i,t))return!0;return!1},_.contains=_.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=_.values(t)),_.indexOf(t,e)>=0)},_.invoke=function(t,e){var r=u.call(arguments,2),n=_.isFunction(e);return _.map(t,function(t){return(n?e:t[e]).apply(t,r)})},_.pluck=function(t,e){return _.map(t,_.property(e))},_.where=function(t,e){return _.filter(t,_.matches(e))},_.findWhere=function(t,e){return _.find(t,_.matches(e))},_.max=function(t,e,r){var n,i,o=-1/0,s=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:_.values(t);for(var a=0,u=t.length;u>a;a++)n=t[a],n>o&&(o=n)}else e=_.iteratee(e,r),_.each(t,function(t,r,n){i=e(t,r,n),(i>s||i===-1/0&&o===-1/0)&&(o=t,s=i)});return o},_.min=function(t,e,r){var n,i,o=1/0,s=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:_.values(t);for(var a=0,u=t.length;u>a;a++)n=t[a],o>n&&(o=n)}else e=_.iteratee(e,r),_.each(t,function(t,r,n){i=e(t,r,n),(s>i||1/0===i&&1/0===o)&&(o=t,s=i)});return o},_.shuffle=function(t){for(var e,r=t&&t.length===+t.length?t:_.values(t),n=r.length,i=Array(n),o=0;n>o;o++)e=_.random(0,o),e!==o&&(i[o]=i[e]),i[e]=r[o];return i},_.sample=function(t,e,r){return null==e||r?(t.length!==+t.length&&(t=_.values(t)),t[_.random(t.length-1)]):_.shuffle(t).slice(0,Math.max(0,e))},_.sortBy=function(t,e,r){return e=_.iteratee(e,r),_.pluck(_.map(t,function(t,r,n){return{value:t,index:r,criteria:e(t,r,n)}}).sort(function(t,e){var r=t.criteria,n=e.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return t.index-e.index}),"value")};var g=function(t){return function(e,r,n){var i={};return r=_.iteratee(r,n),_.each(e,function(n,o){var s=r(n,o,e);t(i,n,s)}),i}};_.groupBy=g(function(t,e,r){_.has(t,r)?t[r].push(e):t[r]=[e]}),_.indexBy=g(function(t,e,r){t[r]=e}),_.countBy=g(function(t,e,r){_.has(t,r)?t[r]++:t[r]=1}),_.sortedIndex=function(t,e,r,n){r=_.iteratee(r,n,1);for(var i=r(e),o=0,s=t.length;s>o;){var a=o+s>>>1;r(t[a])<i?o=a+1:s=a}return o},_.toArray=function(t){return t?_.isArray(t)?u.call(t):t.length===+t.length?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:t.length===+t.length?t.length:_.keys(t).length},_.partition=function(t,e,r){e=_.iteratee(e,r);var n=[],i=[];return _.each(t,function(t,r,o){(e(t,r,o)?n:i).push(t)}),[n,i]},_.first=_.head=_.take=function(t,e,r){return null==t?void 0:null==e||r?t[0]:0>e?[]:u.call(t,0,e)},_.initial=function(t,e,r){return u.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))},_.last=function(t,e,r){return null==t?void 0:null==e||r?t[t.length-1]:u.call(t,Math.max(t.length-e,0))},_.rest=_.tail=_.drop=function(t,e,r){return u.call(t,null==e||r?1:e)},_.compact=function(t){return _.filter(t,_.identity)};var m=function(t,e,r,n){if(e&&_.every(t,_.isArray))return c.apply(n,t);for(var i=0,o=t.length;o>i;i++){var s=t[i];_.isArray(s)||_.isArguments(s)?e?a.apply(n,s):m(s,e,r,n):r||n.push(s)}return n};_.flatten=function(t,e){return m(t,e,!1,[])},_.without=function(t){return _.difference(t,u.call(arguments,1))},_.uniq=_.unique=function(t,e,r,n){if(null==t)return[];_.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=_.iteratee(r,n));for(var i=[],o=[],s=0,a=t.length;a>s;s++){var u=t[s];if(e)s&&o===u||i.push(u),o=u;else if(r){var c=r(u,s,t);_.indexOf(o,c)<0&&(o.push(c),i.push(u))}else _.indexOf(i,u)<0&&i.push(u)}return i},_.union=function(){return _.uniq(m(arguments,!0,!0,[]))},_.intersection=function(t){if(null==t)return[];for(var e=[],r=arguments.length,n=0,i=t.length;i>n;n++){var o=t[n];if(!_.contains(e,o)){for(var s=1;r>s&&_.contains(arguments[s],o);s++);s===r&&e.push(o)}}return e},_.difference=function(t){var e=m(u.call(arguments,1),!0,!0,[]);return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(t){if(null==t)return[];for(var e=_.max(arguments,"length").length,r=Array(e),n=0;e>n;n++)r[n]=_.pluck(arguments,n);return r},_.object=function(t,e){if(null==t)return{};for(var r={},n=0,i=t.length;i>n;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r},_.indexOf=function(t,e,r){if(null==t)return-1;var n=0,i=t.length;if(r){if("number"!=typeof r)return n=_.sortedIndex(t,e),t[n]===e?n:-1;n=0>r?Math.max(0,i+r):r}for(;i>n;n++)if(t[n]===e)return n;return-1},_.lastIndexOf=function(t,e,r){if(null==t)return-1;var n=t.length;for("number"==typeof r&&(n=0>r?n+r+1:Math.min(n,r+1));--n>=0;)if(t[n]===e)return n;return-1},_.range=function(t,e,r){arguments.length<=1&&(e=t||0,t=0),r=r||1;for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),o=0;n>o;o++,t+=r)i[o]=t;return i};var j=function(){};_.bind=function(t,e){var r,n;if(d&&t.bind===d)return d.apply(t,u.call(arguments,1));if(!_.isFunction(t))throw new TypeError("Bind must be called on a function");return r=u.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,r.concat(u.call(arguments)));j.prototype=t.prototype;var i=new j;j.prototype=null;var o=t.apply(i,r.concat(u.call(arguments)));return _.isObject(o)?o:i}},_.partial=function(t){var e=u.call(arguments,1);return function(){for(var r=0,n=e.slice(),i=0,o=n.length;o>i;i++)n[i]===_&&(n[i]=arguments[r++]);for(;r<arguments.length;)n.push(arguments[r++]);return t.apply(this,n)}},_.bindAll=function(t){var e,r,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)r=arguments[e],t[r]=_.bind(t[r],t);return t},_.memoize=function(t,e){var r=function(n){var i=r.cache,o=e?e.apply(this,arguments):n;return _.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r},_.delay=function(t,e){var r=u.call(arguments,2);return setTimeout(function(){return t.apply(null,r)},e)},_.defer=function(t){return _.delay.apply(_,[t,1].concat(u.call(arguments,1)))},_.throttle=function(t,e,r){var n,i,o,s=null,a=0;r||(r={});var u=function(){a=r.leading===!1?0:_.now(),s=null,o=t.apply(n,i),s||(n=i=null)};return function(){var c=_.now();a||r.leading!==!1||(a=c);var l=e-(c-a);return n=this,i=arguments,0>=l||l>e?(clearTimeout(s),s=null,a=c,o=t.apply(n,i),s||(n=i=null)):s||r.trailing===!1||(s=setTimeout(u,l)),o}},_.debounce=function(t,e,r){var n,i,o,s,a,u=function(){var c=_.now()-s;e>c&&c>0?n=setTimeout(u,e-c):(n=null,r||(a=t.apply(o,i),n||(o=i=null)))};return function(){o=this,i=arguments,s=_.now();var c=r&&!n;return n||(n=setTimeout(u,e)),c&&(a=t.apply(o,i),o=i=null),a}},_.wrap=function(t,e){return _.partial(e,t)},_.negate=function(t){return function(){return!t.apply(this,arguments)}},_.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},_.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},_.before=function(t,e){var r;return function(){return--t>0?r=e.apply(this,arguments):e=null,r}},_.once=_.partial(_.before,2),_.keys=function(t){if(!_.isObject(t))return[];if(p)return p(t);var e=[];for(var r in t)_.has(t,r)&&e.push(r);return e},_.values=function(t){for(var e=_.keys(t),r=e.length,n=Array(r),i=0;r>i;i++)n[i]=t[e[i]];return n},_.pairs=function(t){for(var e=_.keys(t),r=e.length,n=Array(r),i=0;r>i;i++)n[i]=[e[i],t[e[i]]];return n},_.invert=function(t){for(var e={},r=_.keys(t),n=0,i=r.length;i>n;n++)e[t[r[n]]]=r[n];return e},_.functions=_.methods=function(t){var e=[];for(var r in t)_.isFunction(t[r])&&e.push(r);return e.sort()},_.extend=function(t){if(!_.isObject(t))return t;for(var e,r,n=1,i=arguments.length;i>n;n++){e=arguments[n];for(r in e)h.call(e,r)&&(t[r]=e[r])}return t},_.pick=function(t,e,r){var n,i={};if(null==t)return i;if(_.isFunction(e)){e=v(e,r);for(n in t){var o=t[n];e(o,n,t)&&(i[n]=o)}}else{var s=c.apply([],u.call(arguments,1));t=new Object(t);for(var a=0,l=s.length;l>a;a++)n=s[a],n in t&&(i[n]=t[n])}return i},_.omit=function(t,e,r){if(_.isFunction(e))e=_.negate(e);else{var n=_.map(c.apply([],u.call(arguments,1)),String);e=function(t,e){return!_.contains(n,e)}}return _.pick(t,e,r)},_.defaults=function(t){if(!_.isObject(t))return t;for(var e=1,r=arguments.length;r>e;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t};var w=function(t,e,r,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var i=l.call(t);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=r.length;o--;)if(r[o]===t)return n[o]===e;var s=t.constructor,a=e.constructor;if(s!==a&&"constructor"in t&&"constructor"in e&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(a)&&a instanceof a))return!1;r.push(t),n.push(e);var u,c;if("[object Array]"===i){if(u=t.length,c=u===e.length)for(;u--&&(c=w(t[u],e[u],r,n)););}else{var h,f=_.keys(t);if(u=f.length,c=_.keys(e).length===u)for(;u--&&(h=f[u],c=_.has(e,h)&&w(t[h],e[h],r,n)););}return r.pop(),n.pop(),c};_.isEqual=function(t,e){return w(t,e,[],[])},_.isEmpty=function(t){if(null==t)return!0;if(_.isArray(t)||_.isString(t)||_.isArguments(t))return 0===t.length;for(var e in t)if(_.has(t,e))return!1;return!0},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=f||function(t){return"[object Array]"===l.call(t)},_.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},_.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){_["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return _.has(t,"callee")}),"function"!=typeof/./&&(_.isFunction=function(t){return"function"==typeof t||!1}),_.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&t!==+t},_.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===l.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return null!=t&&h.call(t,e)},_.noConflict=function(){return t._=n,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.noop=function(){},_.property=function(t){return function(e){return e[t]}},_.matches=function(t){var e=_.pairs(t),r=e.length;return function(t){if(null==t)return!r;t=new Object(t);for(var n=0;r>n;n++){var i=e[n],o=i[0];if(i[1]!==t[o]||!(o in t))return!1}return!0}},_.times=function(t,e,r){var n=Array(Math.max(0,t));e=v(e,r,1);for(var i=0;t>i;i++)n[i]=e(i);return n},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=_.invert(b),E=function(t){var e=function(e){return t[e]},r="(?:"+_.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(i,e):t}};_.escape=E(b),_.unescape=E(F),_.result=function(t,e){if(null==t)return void 0;var r=t[e];return _.isFunction(r)?t[e]():r};var k=0;_.uniqueId=function(t){var e=++k+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var x=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,A=function(t){return"\\"+T[t]};_.template=function(t,e,r){!e&&r&&(e=r),e=_.defaults({},e,_.templateSettings);var n=RegExp([(e.escape||x).source,(e.interpolate||x).source,(e.evaluate||x).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(n,function(e,r,n,s,a){return o+=t.slice(i,a).replace(R,A),i=a+e.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var u=function(t){return s.call(this,t,_)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},_.chain=function(t){var e=_(t);return e._chain=!0,e};var P=function(t){return this._chain?_(t).chain():t};_.mixin=function(t){_.each(_.functions(t),function(e){var r=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),P.call(this,r.apply(_,t))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];_.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],P.call(this,r)}}),_.each(["concat","join","slice"],function(t){var e=i[t];_.prototype[t]=function(){return P.call(this,e.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this)},{}],3:[function(t,e){/*!
 * @license coffee-mixin v2.1.0
 * (c) 2014 sugarshin https://github.com/sugarshin
 * License: MIT
 */
var r,n={}.hasOwnProperty;e.exports=r=function(){function t(){}return t.inheritance=function(t,e){var r,i;for(i in e)n.call(e,i)&&(t[i]=e[i]);return r=function(){this.constructor=t},r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},t.extend=function(t,e){var r,i;for(r in e)n.call(e,r)&&(i=e[r],t[r]=i);return this},t.include=function(t,e){var r,i;for(r in e)n.call(e,r)&&(i=e[r],t.prototype[r]=i);return this},t}()},{}],4:[function(t,e){/*!
 * @license eventz v1.2.0
 * (c) 2015 sugarshin https://github.com/sugarshin
 * License: MIT
 * Fork on https://github.com/Takazudo/EveEve
 */
(function(){var t,r=[].slice;e.exports=t=function(){function t(){}return t.on=function(t,e){var r,n,i,o,s;for(this._listeners||(this._listeners={}),r=t.split(/\s+/),o=0,s=r.length;s>o;o++)n=r[o],(i=this._listeners)[n]||(i[n]=[]),this._listeners[n].push(e);return this},t.one=function(t,e){var r;return this.on(t,r=function(n){return function(){return n.off(t,r),e.apply(n,arguments)}}(this)),this},t.off=function(t,e){var r,n,i,o,s,a,u,c,l,h;if(!t)return this._listeners||(this._listeners={}),this;for(i=t.split(/\s+/),a=0,c=i.length;c>a;a++)if(s=i[a],r=null!=(h=this._listeners)?h[s]:void 0)if(e)for(o=u=0,l=r.length;l>u;o=++u)n=r[o],n===e&&(r=r.slice(),r.splice(o,1),this._listeners[s]=r);else delete this._listeners[s];return this},t.trigger=function(){var t,e,n,i,o,s,a;if(t=1<=arguments.length?r.call(arguments,0):[],i=t.shift(),e=null!=(a=this._listeners)?a[i]:void 0,!e)return this;for(o=0,s=e.length;s>o&&(n=e[o],n.apply(this,t)!==!1);o++);return this},t}()}).call(this)},{}],5:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(t){function e(t){var e=new r(t),n=e.promise();return n.isRejected()?n:(e.setHowMany(1),e.setUnwrap(),e.init(),n)}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],6:[function(t,e){(function(r){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(65536);var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o.isStatic?o(this.drainQueues):o}var i=new Error,o=t("./schedule.js"),s=t("./queue.js"),a="undefined"!=typeof r?r:void 0;n.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},n.prototype._withDomain=function(t){return void 0===a||null==a.domain||t.domain||(t=a.domain.bind(t)),t},n.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),t=this._withDomain(t),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(r){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},n.prototype.invokeLater=function(t,e,r){t=this._withDomain(t),this._lateQueue.push(t,e,r),this._queueTick()},n.prototype.invokeFirst=function(t,e,r){t=this._withDomain(t),this._normalQueue.unshift(t,e,r),this._queueTick()},n.prototype.invoke=function(t,e,r){t=this._withDomain(t),this._normalQueue.push(t,e,r),this._queueTick()},n.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift(),r=t.shift(),n=t.shift();e.call(r,n)}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},e.exports=new n,e.exports.firstLineError=i}).call(this,t("_process"))},{"./queue.js":29,"./schedule.js":32,_process:40}],7:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";function r(t){try{Promise===t&&(Promise=n)}catch(e){}return t}var n;"undefined"!=typeof Promise&&(n=Promise),e.exports=t("./promise.js")(),e.exports.noConflict=r},{"./promise.js":24}],8:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";var r=Object.create;if(r){var n=r(null),i=r(null);n[" size"]=i[" size"]=0}e.exports=function(e){function r(t){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,t))}function o(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))}function s(t,e,r){var n=r[t];if("function"!=typeof n){if(!d(t))return null;if(n=e(t),r[t]=n,r[" size"]++,r[" size"]>512){for(var i=Object.keys(r),o=0;256>o;++o)delete r[i[o]];r[" size"]=i.length-256}}return n}function a(t){return s(t,r,n)}function u(t){return s(t,o,i)}function c(t){return t[this.pop()].apply(t,this)}function l(t){return t[this]}function h(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var f=t("./util.js"),p=f.canEvaluate,d=f.isIdentifier;e.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),n=1;e>n;++n)r[n-1]=arguments[n];if(p){var i=a(t);if(null!==i)return this._then(i,void 0,void 0,r,void 0)}return r.push(t),this._then(c,void 0,void 0,r,void 0)},e.prototype.get=function(t){var e,r="number"==typeof t;if(r)e=h;else if(p){var n=u(t);e=null!==n?n:l}else e=l;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":39}],9:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r){var n=t("./errors.js"),i=n.canAttachTrace,o=t("./async.js"),s=t("./util.js"),a=n.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable();var n=i(t)?t:new Error(s.toString(t));r._attachExtraTrace(n),r._target()._rejectUnchecked(t,n)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new a),o.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=new e(r);return t._propagateFrom(this,6),t._follow(this),t._unsetCancellable(),t},e.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":6,"./errors.js":14,"./util.js":39}],10:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(){function e(t){this._parent=t,h(this,e)}function r(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(e))try{var i=JSON.stringify(t);e=i}catch(o){}0===e.length&&(e="(empty array)")}return"(<"+n(e)+">, no stack trace)"}function n(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function i(t){var e=t.match(l);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}var o=t("./util.js").inherits,s=t("./es5.js").defineProperty,a=null,u=null;o(e,Error),e.prototype.parent=function(){return this._parent},e.prototype.setParent=function(t){t!==this&&(this._parent=t)},e.prototype.hasParent=function(){return void 0!==this._parent},e.prototype.attachExtraTrace=function(t){var e=this,r=t.stack;r="string"==typeof r?r.split("\n"):[],this.protectErrorMessageNewlines(r);var n=1,i=1;do r=e.combine(r),i++;while(null!=(e=e.parent()));var o=Error.stackTraceLimit||10,s=(o+n)*i,a=r.length;a>s&&(r.length=s),a>0&&(r[0]=r[0].split("\x00").join("\n")),t.stack=r.length<=n?"(No stack trace)":r.join("\n")},e.prototype.combine=function(t){for(var e=this.stack.split("\n"),r=t.length-1,n=t[r],i=-1,o=e.length-1;o>=0;--o)if(e[o]===n){i=o;break}for(var o=i;o>=0;--o){var s=e[o];if(t[r]!==s)break;t.pop(),r--}t.push("From previous event:");for(var u=t.concat(e),l=[],o=0,h=u.length;h>o;++o)a.test(u[o])&&c(u[o])||o>0&&!a.test(u[o])&&"From previous event:"!==u[o]||l.push(u[o]);return l},e.prototype.protectErrorMessageNewlines=function(t){for(var e=0;e<t.length&&!a.test(t[e]);++e);if(!(1>=e)){for(var r=[],n=0;e>n;++n)r.push(t.shift());t.unshift(r.join("\x00"))}},e.formatAndLogError=function(t,e){if("object"==typeof console){var r;if("object"==typeof t||"function"==typeof t){var n=t.stack;r=e+u(n,t)}else r=e+String(t);"function"==typeof console.warn||"object"==typeof console.warn?console.warn(r):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}},e.unhandledRejection=function(t){e.formatAndLogError(t,"^--- With additional stack trace: ")},e.possiblyUnhandledRejection=function(t){e.formatAndLogError(t,"Possibly unhandled ")},e.isSupported=function(){return"function"==typeof h};var c=function(){return!1},l=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;e.setBounds=function(t,r){if(e.isSupported()){for(var n,o,s=t.stack.split("\n"),a=r.stack.split("\n"),u=-1,l=-1,h=0;h<s.length;++h){var f=i(s[h]);if(f){n=f.fileName,u=f.line;break}}for(var h=0;h<a.length;++h){var f=i(a[h]);if(f){o=f.fileName,l=f.line;break}}0>u||0>l||!n||!o||n!==o||u>=l||(c=function(t){var e=i(t);return e&&e.fileName===n&&u<=e.line&&e.line<=l?!0:!1})}};var h=function f(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){a=/^\s*at\s*/,u=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.name+". "+e.message:r(e)};var t=Error.captureStackTrace,e=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo)/;return c=function(t){return e.test(t)},function(e,r){t(e,r)}}var n=new Error;if("string"==typeof n.stack&&"function"==typeof"".startsWith&&n.stack.startsWith("stackDetection@")&&"stackDetection"===f.name){s(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),a=/@/;var i=/[@\n]/;return u=function(t,e){return"string"==typeof t?e.name+". "+e.message+"\n"+t:void 0!==e.name&&void 0!==e.message?e.name+". "+e.message:r(e)},function(t){for(var e=(new Error).stack,r=e.split(i),n=r.length,o="",s=0;n>s;s+=2)o+=r[s],o+="@",o+=r[s+1],o+="\n";t.stack=o}}return u=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?r(e):e.name+". "+e.message},null}();return e}},{"./es5.js":16,"./util.js":39}],11:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e){function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}function n(t,e){var r={},n=s(t,r,e);if(n===a)return n;var i=u(r);return i.length?(a.e=new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):n}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch1,a=i.errorObj,u=t("./es5.js").keys,c=o.TypeError;return r.prototype.doFilter=function(t){for(var r=this._callback,u=this._promise,c=u._boundTo,l=0,h=this._instances.length;h>l;++l){var f=this._instances[l],p=f===Error||null!=f&&f.prototype instanceof Error;if(p&&t instanceof f){var d=s(r,c,t);return d===a?(e.e=d.e,e):d}if("function"==typeof f&&!p){var _=n(f,t);if(_===a){var v=o.canAttachTrace(a.e)?a.e:new Error(i.toString(a.e));this._promise._attachExtraTrace(v),t=a.e;break}if(_){var d=s(r,c,t);return d===a?(e.e=d.e,e):d}}}return e.e=t,e},r}},{"./errors.js":14,"./es5.js":16,"./util.js":39}],12:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";var r=t("./util.js"),n=r.isPrimitive,i=r.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},r=function(){throw this},o=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return i&&n(t)?this._then(o(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return i&&n(t)?this._then(o(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":39}],13:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,n){return r(t,n,null,e)}}},{}],14:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";function r(t){try{d(t,"isOperational",!0)}catch(e){}}function n(t){return null==t?!1:t instanceof a||t.isOperational===!0}function i(t){return t instanceof Error}function o(t){return i(t)&&h(t,"stack")}function s(t,e){function r(n){return this instanceof r?(d(this,"message","string"==typeof n?n:e),d(this,"name",t),void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(n)}return p(r,Error),r}function a(t){d(this,"name","OperationalError"),d(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(d(this,"message",t.message),d(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var u,c,l=t("./es5.js").freeze,h=t("./es5.js").propertyIsWritable,f=t("./util.js"),p=f.inherits,d=f.notEnumerableProp,_=s("CancellationError","cancellation error"),v=s("TimeoutError","timeout error"),y=s("AggregateError","aggregate error");try{u=TypeError,c=RangeError}catch(g){u=s("TypeError","type error"),c=s("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),j=0;j<m.length;++j)"function"==typeof Array.prototype[m[j]]&&(y.prototype[m[j]]=Array.prototype[m[j]]);y.prototype.length=0,y.prototype.isOperational=!0;var w=0;y.prototype.toString=function(){var t=Array(4*w+1).join(" "),e="\n"+t+"AggregateError of:\n";w++,t=Array(4*w+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];n=i.join("\n"),e+=n+"\n"}return w--,e},p(a,Error);var b="__BluebirdErrorTypes__",F=Error[b];F||(F=l({CancellationError:_,TimeoutError:v,OperationalError:a,RejectionError:a,AggregateError:y}),d(Error,b,F)),e.exports={Error:Error,TypeError:u,RangeError:c,CancellationError:F.CancellationError,OperationalError:F.OperationalError,TimeoutError:F.TimeoutError,AggregateError:F.AggregateError,originatesFromRejection:n,markAsOriginatingFromRejection:r,canAttachTrace:o}},{"./es5.js":16,"./util.js":39}],15:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e){function r(t){var r=new n(t),i=e.rejected(r),o=i._peekContext();return null!=o&&o.attachExtraTrace(r),i}var n=t("./errors.js").TypeError;return r}},{"./errors.js":14}],16:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var n={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,s=function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e},a=function(t,e,r){return t[e]=r.value,t},u=function(t){return t},c=function(t){try{return Object(t).constructor.prototype}catch(e){return o}},l=function(t){try{return"[object Array]"===i.call(t)}catch(e){return!1}};e.exports={isArray:l,keys:s,defineProperty:a,freeze:u,getPrototypeOf:c,isES5:r,propertyIsWritable:function(){return!0}}}},{}],17:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],18:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function u(t,e,r){var n;return n=f&&p(e)?r?s(e):a(e):r?i:o,t._then(n,d,void 0,e,void 0)}function c(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundTo):o();if(void 0!==s){var a=n(s,void 0);if(a instanceof e)return a=a._target(),u(a,t,i.isFulfilled())}return i.isRejected()?(r.e=t,r):t}function l(t){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundTo,t):i(t);if(void 0!==o){var s=n(o,void 0);if(s instanceof e)return s=s._target(),u(s,t,!0)}return t}var h=t("./util.js"),f=h.wrapsPrimitiveReceiver,p=h.isPrimitive,d=h.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?c:l,e?c:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":39}],19:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n,i){function o(t,r,n){for(var o=h,s=e,a=r.length,u=0;a>u;++u){var c=f(r[u],void 0,t);if(c===o)return s.reject(o.e);var l=i(c,n);if(l instanceof s)return l}return null}function s(t,r,i){var o=this._promise=new e(n);o._setTrace(void 0),this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p}var a=t("./errors.js"),u=a.TypeError,c=t("./util.js").deprecated,l=t("./util.js"),h=l.errorObj,f=l.tryCatch1,p=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===h){this._generator=void 0;var r=a.canAttachTrace(t.e)?t.e:new Error(l.toString(t.e));return this._promise._attachExtraTrace(r),void this._promise._reject(t.e,r)}var n=t.value;if(t.done===!0)this._generator=void 0,this._promise._tryFollow(n)||this._promise._fulfill(n);else{var s=i(n,this._promise);if(!(s instanceof e)&&(s=o(s,this._yieldHandlers,this._promise),null===s))return void this._throw(new u("A value was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n"));s._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){a.canAttachTrace(t)&&this._promise._attachExtraTrace(t),this._continue(f(this._generator["throw"],this._generator,t))},s.prototype._next=function(t){this._continue(f(this._generator.next,this._generator,t))},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(e).yieldHandler,n=s;return function(){var e=t.apply(this,arguments),i=new n(void 0,void 0,r);return i._generator=e,i._next(void 0),i.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");p.push(t)},e.spawn=function(t){if(c("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=new s(t,this),i=n.promise();return n._run(e.spawn),i}}},{"./errors.js":14,"./util.js":39}],20:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n,i){function o(t){this._reject(t)}var s=t("./util.js"),a=s.canEvaluate,u=s.tryCatch1,c=s.errorObj;if(a){for(var l=function(t){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))},h=function(t){for(var e=[],r=1;t>=r;++r)e.push("holder.p"+r);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,e.join(", ")))},f=[],p=[void 0],d=1;5>=d;++d)f.push(l(d)),p.push(h(d));var _=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};_.prototype.callers=p,_.prototype.checkFulfillment=function(t){var e=this.now;e++;var r=this.total;if(e>=r){var n=this.callers[r],i=u(n,void 0,this);i===c?t._rejectUnchecked(i.e):t._tryFollow(i)||t._fulfillUnchecked(i)}else this.now=e}}e.join=function(){var t,s=arguments.length-1;if(s>0&&"function"==typeof arguments[s]&&(t=arguments[s],6>s&&a)){var u=new e(i);u._setTrace(void 0);for(var c=new _(s,t),l=f,h=0;s>h;++h){var p=n(arguments[h],void 0);p instanceof e?(p=p._target(),p._isPending()?p._then(l[h],o,void 0,u,c):p._isFulfilled()?l[h].call(u,p._value(),c):(u._reject(p._reason()),p._unsetRejectionIsUnhandled())):l[h].call(u,p,c)}return u}for(var d=arguments.length,v=new Array(d),y=0;d>y;++y)v[y]=arguments[y];var u=new r(v).promise();return void 0!==t?u.spread(t):u}}},{"./util.js":39}],21:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n,i,o){function s(t,e,r,n){this.constructor$(t),this._callback=e,this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:f,this._init$(void 0,-2)}function a(t,e,r,n){var i="object"==typeof r&&null!==r?r.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,n)}var u=t("./util.js"),c=u.tryCatch3,l=u.errorObj,h={},f=[];u.inherits(s,r),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(n[r]===h){if(n[r]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return n[r]=t,void this._queue.push(r);null!==s&&(s[r]=t);var u=this._callback,f=this._promise._boundTo,p=c(u,f,t,r,o);if(p===l)return this._reject(p.e);var d=i(p,this._promise);if(d instanceof e){if(d=d._target(),d._isPending())return a>=1&&this._inFlight++,n[r]=h,d._proxyPromiseArray(this,r);if(!d._isFulfilled())return d._unsetRejectionIsUnhandled(),this._reject(d._reason());p=d._value()}n[r]=p}var _=++this._totalResolved;_>=o&&(null!==s?this._filter(n,s):this._resolve(n))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},s.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;r>o;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):a(this,t,e,null).promise()},e.map=function(t,e,r,i){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):a(t,e,r,i).promise()}}},{"./util.js":39}],22:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e){function r(t,e){if(!o.isArray(t))return n(t,e);var r=o.tryCatchApply(this,[null].concat(t),e);r===c&&s.throwLater(r.e)}function n(t,e){var r=this,n=void 0===t?u(r,e,null):a(r,e,null,t);n===c&&s.throwLater(n.e)}function i(t,e){var r=this,n=u(r,e,t);n===c&&s.throwLater(n.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch2,u=o.tryCatch1,c=o.errorObj;e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=r),this._then(o,i,void 0,t,this._boundTo)}return this}}},{"./async.js":6,"./util.js":39}],23:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r){var n=t("./util.js"),i=t("./async.js"),o=t("./errors.js"),s=n.tryCatch1,a=n.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var r=t.value,i=t.handler,u=t.promise,c=t.receiver,l=s(i,c,r);if(l===a){if(null!=l.e&&"StopProgressPropagation"!==l.e.name){var h=o.canAttachTrace(l.e)?l.e:new Error(n.toString(l.e));u._attachExtraTrace(h),u._progress(l.e)}}else l instanceof e?l._then(u._progress,null,null,u,void 0):u._progress(l)},e.prototype._progressUnchecked=function(t){for(var n=this._length(),o=this._progress,s=0;n>s;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:t}):i.invoke(o,u,t);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,t,u):c instanceof r&&!c._isResolved()&&c._promiseProgressed(t,u)}}}}},{"./async.js":6,"./errors.js":14,"./util.js":39}],24:[function(t,e){(function(r){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(){function e(t){if("function"!=typeof t)throw new F("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==e)throw new F("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,t!==c&&this._resolveFromResolver(t)}var n,i=function(){return new F("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},o=function(){return new e.PromiseInspection(this._target())},s=t("./util.js"),a=t("./async.js"),u=t("./errors.js"),c=function(){},l={},h={e:null},f=t("./thenables.js")(e,c),p=t("./promise_array.js")(e,c,f),d=t("./captured_trace.js")(),_=t("./catch_filter.js")(h),v=t("./promise_resolver.js"),y=s.isArray,g=s.errorObj,m=s.tryCatch1,j=s.tryCatch2,w=s.tryCatchApply,b=u.RangeError,F=u.TypeError,E=u.CancellationError,k=u.TimeoutError,x=u.OperationalError,T=u.originatesFromRejection,R=u.markAsOriginatingFromRejection,A=u.canAttachTrace,P=t("./errors_api_rejection")(e),S=!1||!("undefined"==typeof r||"string"!=typeof r.execPath||"object"!=typeof r.env||!r.env.BLUEBIRD_DEBUG&&"development"!==r.env.NODE_ENV);e.prototype.bind=function(t){var r=f(t,this),n=new e(c);n._propagateFrom(this,3);var i=this._target();return r instanceof e?(i._then(c,n._reject,n._progress,n,null),r._then(function(t){n._isPending()&&(n._setBoundTo(t),n._follow(i))},n._reject,n._progress,n,null)):(n._setBoundTo(t),n._follow(i)),n},e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var r=arguments.length;if(r>1){var n,i=new Array(r-1),o=0;for(n=0;r-1>n;++n){var s=arguments[n];if("function"!=typeof s){var a=new F("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n");return this._attachExtraTrace(a),e.reject(a)}i[o++]=s}i.length=o,t=arguments[n],this._resetTrace();var u=new _(i,t,this);return this._then(void 0,u.doFilter,void 0,u,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)},e.prototype.then=function(t,e,r){return this._then(t,e,r,void 0,void 0)},e.prototype.done=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);n._setIsFinal()},e.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,l,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},e.prototype.all=function(){return new p(this).promise()},e.prototype.error=function(t){return this.caught(T,t)},e.is=function(t){return t instanceof e},e.all=function(t){return new p(t).promise()},e.method=function(t){if("function"!=typeof t)throw new F("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var r;switch(arguments.length){case 0:r=m(t,this,void 0);break;case 1:r=m(t,this,arguments[0]);break;case 2:r=j(t,this,arguments[0],arguments[1]);break;default:for(var n=arguments.length,i=new Array(n),o=0;n>o;++o)i[o]=arguments[o];r=w(t,i,this)}var s=new e(c);return s._setTrace(void 0),s._resolveFromSyncValue(r),s}},e.attempt=e["try"]=function(t,r,n){if("function"!=typeof t)return P("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var i=y(r)?w(t,r,n):m(t,n,r),o=new e(c);return o._setTrace(void 0),o._resolveFromSyncValue(i),o},e.defer=e.pending=function(){var t=new e(c);return t._setTrace(void 0),new v(t)},e.bind=function(t){var r=f(t,void 0),n=new e(c);return n._setTrace(void 0),r instanceof e?r._then(function(t){n._setBoundTo(t),n._fulfill(void 0)},n._reject,n._progress,n,null):(n._setBoundTo(t),n._setFulfilled()),n},e.cast=function(t){var r=f(t,void 0);if(!(r instanceof e)){var n=r;r=new e(c),r._setTrace(void 0),r._setFulfilled(),r._settledValue=n,r._cleanValues()}return r},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var r=new e(c);if(r._setTrace(void 0),R(t),r._setRejected(),r._settledValue=t,r._cleanValues(),!A(t)){var n=new Error(s.toString(t));r._setCarriedStackTrace(n)}return r._ensurePossibleRejectionHandled(),r},e.onPossiblyUnhandledRejection=function(t){d.possiblyUnhandledRejection="function"==typeof t?t:void 0},e.onUnhandledRejectionHandled=function(t){n="function"==typeof t?t:void 0},e.longStackTraces=function(){if(a.haveItemsQueued()&&S===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");S=d.isSupported()},e.hasLongStackTraces=function(){return S&&d.isSupported()},e.setScheduler=function(t){if("function"!=typeof t)throw new F("fn must be a function\n\n    See http://goo.gl/916lJJ\n");a._schedule=t},e.prototype._then=function(t,r,n,i,o){var s=void 0!==o,u=s?o:new e(c);s||u._propagateFrom(this,7);var l=this._target();l!==this&&(void 0===i&&(i=this._boundTo),s||u._setIsMigrated());var h=l._addCallbacks(t,r,n,u,i);return l._isResolved()&&!l._isSettlePromisesQueued()&&a.invoke(l._settlePromiseAtPostResolution,l,h),u},e.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},e.prototype._length=function(){return 262143&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-262144&this._bitField|262143&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},e.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},e.prototype._isMigrated=function(){return(4194304&this._bitField)>0},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},e.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return this._isBound()&&void 0===e?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},e.prototype._migrateCallbacks=function(t,r,n,i,o){i instanceof e&&i._setIsMigrated(),this._addCallbacks(t,r,n,i,o)},e.prototype._addCallbacks=function(t,e,r,n,i){var o=this._length();if(o>=262138&&(o=0,this._setLength(0)),0===o)this._promise0=n,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof r&&(this._progressHandler0=r);else{var s=5*o-5;this[s+3]=n,this[s+4]=i,"function"==typeof t&&(this[s+0]=t),"function"==typeof e&&(this[s+1]=e),"function"==typeof r&&(this[s+2]=r)}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=262138&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=8388608|this._bitField,this._boundTo=t):this._bitField=-8388609&this._bitField},e.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},e.prototype._resolveFromResolver=function(t){var e=this;this._setTrace(void 0),this._pushContext();var r=j(t,void 0,function(t){e._tryFollow(t)||e._fulfill(t)},function(t){var r=A(t)?t:new Error(s.toString(t));e._attachExtraTrace(r),R(t),e._reject(t,r===t?void 0:r)});if(this._popContext(),void 0!==r&&r===g){var n=r.e,i=A(n)?n:new Error(s.toString(n));e._reject(n,i)}},e.prototype._callHandler=function(t,e,r,n){var i;return r._pushContext(),i=e!==l||this._isRejected()?m(t,e,n):w(t,n,this._boundTo),r._popContext(),i},e.prototype._settlePromiseFromHandler=function(t,r,n,o){if(!o._isRejected()){var a=this._callHandler(t,r,o,n);if(a===g||a===o||a===h){var u=a===o?i():a.e,c=A(u)?u:new Error(s.toString(u));a!==h&&o._attachExtraTrace(c),o._rejectUnchecked(u,c)}else if(a=f(a,o),a instanceof e){if(a=a._target(),a._isRejected()&&!a._isCarryingStackTrace()&&!A(a._reason())){var c=new Error(s.toString(a._reason()));o._attachExtraTrace(c),a._setCarriedStackTrace(c)}o._follow(a)}else o._fulfillUnchecked(a)}},e.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(t){this._rejectionHandler0=t},e.prototype._follow=function(t){if(t._isPending()){for(var e=this._length(),r=0;e>r;++r)t._migrateCallbacks(this._fulfillmentHandlerAt(r),this._rejectionHandlerAt(r),this._progressHandlerAt(r),this._promiseAt(r),this._receiverAt(r));this._setFollowing(),this._setLength(0),this._setFollowee(t),this._propagateFrom(t,1)}else t._isFulfilled()?this._fulfillUnchecked(t._value()):this._rejectUnchecked(t._reason(),t._getCarriedStackTrace());t._isRejectionUnhandled()&&t._unsetRejectionIsUnhandled(),S&&!t._trace.hasParent()&&t._trace.setParent(this._trace)},e.prototype._tryFollow=function(t){if(this._isFollowingOrFulfilledOrRejected()||t===this)return!1;var r=f(t,this);return r instanceof e?(this._follow(r._target()),!0):!1},e.prototype._resetTrace=function(){S&&(this._trace=new d(this._peekContext()))},e.prototype._setTrace=function(t){if(S){var e=this._peekContext();this._trace=void 0!==t&&t._trace.parent()===e?t._trace:new d(e)}return this},e.prototype._attachExtraTrace=function(t){S&&A(t)&&this._trace.attachExtraTrace(t)},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&this._setBoundTo(t._boundTo),(2&e)>0&&this._setTrace(t)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var r=this._promiseAt(t),n=r instanceof e;if(n&&r._isMigrated())return r._unsetIsMigrated(),a.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,u=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?n?this._settlePromiseFromHandler(i,u,s,r):i.call(u,s,r):u instanceof p?u._isResolved()||(this._isFulfilled()?u._promiseFulfilled(s,r):u._promiseRejected(s,r)):this._isFulfilled()?r._fulfill(s):r._reject(s,o),t>=4&&4===(31&t)&&a.invokeLater(this._setLength,this,0)},e.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},e.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueSettlePromises=function(){this._isSettlePromisesQueued()||(a.invoke(this._settlePromises,this,void 0),this._setSettlePromisesQueued())},e.prototype._fulfillUnchecked=function(t){if(t===this){var e=i();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},e.prototype._rejectUncheckedCheckError=function(t){var e=A(t)?t:new Error(s.toString(t));this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(t===this){var r=i();return this._attachExtraTrace(r),this._rejectUnchecked(r)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void a.throwLater(function(t){throw"stack"in t&&a.invokeFirst(d.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},e.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==d.possiblyUnhandledRejection&&a.invokeLater(this._notifyUnhandledRejection,this,void 0)},e.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof n&&a.throwLater(n,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue,e=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==e&&(this._unsetCarriedStackTrace(),t=e),"function"==typeof d.possiblyUnhandledRejection&&d.possiblyUnhandledRejection(t,this)}};var O=[];return e.prototype._peekContext=function(){var t=O.length-1;return t>=0?O[t]:void 0},e.prototype._pushContext=function(){S&&O.push(this._trace)},e.prototype._popContext=function(){S&&O.pop()},e.prototype._resolveFromSyncValue=function(t){if(t===g){this._setRejected();var r=t.e;this._settledValue=r,this._cleanValues(),this._attachExtraTrace(r),this._ensurePossibleRejectionHandled()}else{var n=f(t,this);n instanceof e?(n=n._target(),this._follow(n)):(this._setFulfilled(),this._settledValue=t,this._cleanValues())}},d.isSupported()||(e.longStackTraces=function(){},S=!1),e._makeSelfResolutionError=i,t("./finally.js")(e,h,f),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,p,f,c),e.RangeError=b,e.CancellationError=E,e.TimeoutError=k,e.TypeError=F,e.OperationalError=x,e.RejectionError=x,e.AggregateError=u.AggregateError,s.toFastProperties(e),s.toFastProperties(e.prototype),e.Promise=e,d.setBounds(a.firstLineError,s.lastLineError),t("./timers.js")(e,c,f),t("./race.js")(e,c,f),t("./call_get.js")(e),t("./generators.js")(e,P,c,f),t("./map.js")(e,p,P,f,c),t("./nodeify.js")(e),t("./promisify.js")(e,c),t("./props.js")(e,p,f),t("./reduce.js")(e,p,P,f,c),t("./settle.js")(e,p),t("./some.js")(e,p,P),t("./progress.js")(e,p),t("./cancel.js")(e,c),t("./filter.js")(e,c),t("./any.js")(e,p),t("./each.js")(e,c),t("./using.js")(e,P,f),e.prototype=e.prototype,e}}).call(this,t("_process"))},{"./any.js":5,"./async.js":6,"./call_get.js":8,"./cancel.js":9,"./captured_trace.js":10,"./catch_filter.js":11,"./direct_resolve.js":12,"./each.js":13,"./errors.js":14,"./errors_api_rejection":15,"./filter.js":17,"./finally.js":18,"./generators.js":19,"./join.js":20,"./map.js":21,"./nodeify.js":22,"./progress.js":23,"./promise_array.js":25,"./promise_resolver.js":26,"./promisify.js":27,"./props.js":28,"./race.js":30,"./reduce.js":31,"./settle.js":33,"./some.js":34,"./synchronous_inspection.js":35,"./thenables.js":36,"./timers.js":37,"./using.js":38,"./util.js":39,_process:40}],25:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n){function i(t){switch(t){case-1:return void 0;case-2:return[];case-3:return{}}}function o(t){var n,i=this._promise=new e(r);t instanceof e&&(n=t,i._propagateFrom(n,5)),i._setTrace(n),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=t("./errors.js").canAttachTrace,a=t("./util.js"),u=a.isArray;return o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function c(t,r){var o=n(this._values,void 0);if(o instanceof e){if(o._setBoundTo(this._promise._boundTo),o=o._target(),this._values=o,!o._isFulfilled())return o._isPending()?void o._then(c,this._reject,void 0,this,r):(o._unsetRejectionIsUnhandled(),void this._reject(o._reason()));if(o=o._value(),!u(o)){var s=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(s)}}else if(!u(o)){var s=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(s)}if(0===o.length)return void(-5===r?this._resolveEmptyArray():this._resolve(i(r)));var a=this.getActualLength(o.length);this._length=a,this._values=this.shouldCopyValues()?new Array(a):this._values;for(var l=this._promise,h=0;a>h;++h){if(this._isResolved())return;var f=n(o[h],l);f instanceof e?(f=f._target(),f._isPending()?f._proxyPromiseArray(this,h):f._isFulfilled()?this._promiseFulfilled(f._value(),h):(f._unsetRejectionIsUnhandled(),this._promiseRejected(f._reason(),h))):this._promiseFulfilled(f,h)}},o.prototype._isResolved=function(){return null===this._values},o.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},o.prototype.__hardReject__=o.prototype._reject=function(t){this._values=null;var e=s(t)?t:new Error(a.toString(t));this._promise._attachExtraTrace(e),this._promise._reject(t,e)},o.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},o.prototype._promiseRejected=function(t){this._totalResolved++,this._reject(t)},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(t){return t},o}},{"./errors.js":14,"./util.js":39}],26:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";function r(t){return t instanceof Error&&p.getPrototypeOf(t)===Error.prototype}function n(t){var e;return e=r(t)?new l(t):t,u.markAsOriginatingFromRejection(e),e}function i(t){return function(e,r){if(null!==t){if(e){var i=n(a(e));t._attachExtraTrace(i),t._reject(i)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),u=1;o>u;++u)s[u-1]=arguments[u];t._fulfill(s)}else t._fulfill(r);t=null}}}var o,s=t("./util.js"),a=s.maybeWrapAsError,u=t("./errors.js"),c=u.TimeoutError,l=u.OperationalError,h=t("./async.js"),f=s.haveGetters,p=t("./es5.js");if(o=f?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=i(t),this.callback=this.asCallback},f){var d={get:function(){return i(this.promise)}};p.defineProperty(o.prototype,"asCallback",d),p.defineProperty(o.prototype,"callback",d)}o._nodebackForPromise=i,o.prototype.toString=function(){return"[object PromiseResolver]"},o.prototype.resolve=o.prototype.fulfill=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");var e=this.promise;e._tryFollow(t)||h.invoke(e._fulfill,e,t)},o.prototype.reject=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");var e=this.promise;u.markAsOriginatingFromRejection(t);var r=u.canAttachTrace(t)?t:new Error(s.toString(t));e._attachExtraTrace(r),h.invoke(e._reject,e,t),r!==t&&h.invoke(this._setCarriedStackTrace,this,r)},o.prototype.progress=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");h.invoke(this.promise._progress,this.promise,t)},o.prototype.cancel=function(){h.invoke(this.promise.cancel,this.promise,void 0)},o.prototype.timeout=function(){this.reject(new c("timeout"))},o.prototype.isResolved=function(){return this.promise.isResolved()},o.prototype.toJSON=function(){return this.promise.toJSON()},o.prototype._setCarriedStackTrace=function(t){this.promise.isRejected()&&this.promise._setCarriedStackTrace(t)},e.exports=o},{"./async.js":6,"./errors.js":14,"./es5.js":16,"./util.js":39}],27:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r){function n(t){return t.replace(/([$])/,"\\$")}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,r){var n=g.getDataPropertyOrDefault(t,e+r,x);return n?i(n):!1}function s(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new F("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,r,n){for(var a=g.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],h=t[l];"function"!=typeof h||i(h)||o(t,l,e)||!n(l,h,t)||u.push(l,h)}return s(u,e,r),u}function u(t){for(var e=[t],r=Math.max(0,t-1-5),n=t-1;n>=r;--n)n!==t&&e.push(n);for(var n=t+1;5>=n;++n)e.push(n);return e}function c(t){return g.filledRange(t,"arguments[","]")}function l(t){return g.filledRange(t,"_arg","")}function h(t){return"number"==typeof t.length?Math.max(Math.min(t.length,1024),0):0}function f(t){return g.isIdentifier(t)?"."+t:"['"+t.replace(/(['\\])/g,"\\$1")+"']"}function p(t,n,i,o,s){function a(e){var r,i=c(e).join(", "),o=e>0?", ":"";return r="string"==typeof t?"                                                          \n                this.method({{args}}, fn);                                   \n                break;                                                       \n            ".replace(".method",f(t)):n===y?"                                                         \n                callback.call(this, {{args}}, fn);                           \n                break;                                                       \n            ":void 0!==n?"                                                         \n                callback.call(receiver, {{args}}, fn);                       \n                break;                                                       \n            ":"                                                         \n                callback({{args}}, fn);                                      \n                break;                                                       \n            ",r.replace("{{args}}",i).replace(", ",o)}function p(){for(var e="",r=0;r<_.length;++r)e+="case "+_[r]+":"+a(_[r]);var i;return i="string"==typeof t?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",f(t)):n===y?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ",e+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",i)}var d=Math.max(0,h(o)-1),_=u(d),v="string"==typeof i&&g.isIdentifier(i)?i+s:"promisified";return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function (Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(undefined);                                    \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",v).replace("Parameters",l(d)).replace("[CodeForSwitchCase]",p()))(e,t,n,j,w,m,r)}function d(t,n){function i(){var i=n;n===y&&(i=this),"string"==typeof t&&(t=i[t]);var o=new e(r);o._setTrace(void 0);var s=m(o);try{t.apply(i,j(arguments,s))}catch(a){var u=w(a);o._attachExtraTrace(u),o._reject(u)}return o}return i.__isPromisified__=!0,i}function _(t,e,r,i){for(var o=new RegExp(n(e)+"$"),s=a(t,e,o,r),u=0,c=s.length;c>u;u+=2){var l=s[u],h=s[u+1],f=l+e;t[f]=i===T?T(l,y,l,h,e):i(h)}return g.toFastProperties(t),t}function v(t,e){return T(t,e,void 0,t)}var y={},g=t("./util.js"),m=t("./promise_resolver.js")._nodebackForPromise,j=g.withAppended,w=g.maybeWrapAsError,b=g.canEvaluate,F=t("./errors").TypeError,E="Async",k=function(t,e){return g.isIdentifier(t)&&"_"!==t.charAt(0)&&!g.isClass(e)},x={__isPromisified__:!0},T=b?p:d;e.promisify=function(t,e){if("function"!=typeof t)throw new F("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return i(t)?t:v(t,arguments.length<2?y:e)},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new F("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var r=e.suffix;"string"!=typeof r&&(r=E);var n=e.filter;"function"!=typeof n&&(n=k);var i=e.promisifier;if("function"!=typeof i&&(i=T),!g.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=g.inheritedDataKeys(t,{includeHidden:!0}),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&g.isClass(a)&&(_(a.prototype,r,n,i),_(a,r,n,i))}return _(t,r,n,i)}}},{"./errors":14,"./promise_resolver.js":26,"./util.js":39}],28:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n){function i(t){for(var e=c.keys(t),r=e.length,n=new Array(2*r),i=0;r>i;++i){var o=e[i];n[i]=t[o],n[i+r]=o}this.constructor$(n)}function o(t){var r,o=n(t,void 0);return u(o)?(r=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new i(o).promise(),o instanceof e&&r._propagateFrom(o,4),r):a("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var s=t("./util.js"),a=t("./errors_api_rejection")(e),u=s.isObject,c=t("./es5.js");s.inherits(i,r),i.prototype._init=function(){this._init$(void 0,-3)},i.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){for(var n={},i=this.length(),o=0,s=this.length();s>o;++o)n[this._values[o+i]]=this._values[o];this._resolve(n)}},i.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return o(this)},e.props=function(t){return o(t)}}},{"./errors_api_rejection":15,"./es5.js":16,"./util.js":39}],29:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";function r(t,e,r,n,i){for(var o=0;i>o;++o)r[o+n]=t[o+e]}function n(t){this._capacity=t,this._length=0,this._front=0,this._makeCapacity()}n.prototype._willBeOverCapacity=function(t){return this._capacity<t},n.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},n.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,n=(r-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},n.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},n.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},n.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},n.prototype.length=function(){return this._length},n.prototype._makeCapacity=function(){for(var t=this._capacity,e=0;t>e;++e)this[e]=void 0},n.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<3)},n.prototype._resizeTo=function(t){var e=this._front,n=this._capacity,i=new Array(n),o=this.length();if(r(this,0,i,0,n),this._capacity=t,this._makeCapacity(),this._front=0,n>=e+o)r(i,e,this,0,o);else{var s=o-(e+o&n-1);r(i,e,this,0,s),r(i,0,this,s,o-s)}},e.exports=n},{}],30:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n){function i(t,i){var u=n(t,void 0);if(u instanceof e)return a(u);if(!s(t))return o("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var c=new e(r);void 0!==i?c._propagateFrom(i,7):c._setTrace(void 0);for(var l=c._fulfill,h=c._reject,f=0,p=t.length;p>f;++f){var d=t[f];(void 0!==d||f in t)&&e.cast(d)._then(l,h,void 0,c,null)}return c}var o=t("./errors_api_rejection.js")(e),s=t("./util.js").isArray,a=function(t){return t.then(function(e){return i(e,t)})};e.race=function(t){return i(t,void 0)},e.prototype.race=function(){return i(this,void 0)}}},{"./errors_api_rejection.js":15,"./util.js":39}],31:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n,i,o){function s(t,r,n,s){this.constructor$(t),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var a=i(n,void 0),u=!1,c=a instanceof e;c&&(a=a._target(),a._isPending()?a._proxyPromiseArray(this,-1):a._isFulfilled()?(n=a._value(),this._gotAccum=!0):(a._unsetRejectionIsUnhandled(),this._reject(a._reason()),u=!0)),c||this._zerothIsAccum||(this._gotAccum=!0),this._callback=r,this._accum=n,u||this._init$(void 0,-5)}function a(t,e,r,i){if("function"!=typeof e)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var o=new s(t,e,r,i);return o.promise()}var u=t("./util.js"),c=u.tryCatch4,l=u.tryCatch3,h=u.errorObj;u.inherits(s,r),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,r){var n=this._values;n[r]=t;var o,s=this.length(),a=this._preservedValues,u=null!==a,f=this._gotAccum,p=this._valuesPhase;if(!p)for(p=this._valuesPhase=Array(s),o=0;s>o;++o)p[o]=0;if(o=p[r],0===r&&this._zerothIsAccum?(f||(this._accum=t,this._gotAccum=f=!0),p[r]=0===o?1:2):-1===r?f||(this._accum=t,this._gotAccum=f=!0):0===o?p[r]=1:(p[r]=2,f&&(this._accum=t)),f){for(var d,_=this._callback,v=this._promise._boundTo,y=this._reducingIndex;s>y;++y)if(o=p[y],2!==o){if(1!==o)return;if(t=n[y],t instanceof e){if(t=t._target(),!t._isFulfilled())return t._isPending()?void 0:(t._unsetRejectionIsUnhandled(),this._reject(t._reason()));t=t._value()}if(u?(a.push(t),d=l(_,v,t,y,s)):d=c(_,v,this._accum,t,y,s),d===h)return this._reject(d.e);var g=i(d,this._promise);if(g instanceof e){if(g=g._target(),g._isPending())return p[y]=4,g._proxyPromiseArray(this,y);if(!g._isFulfilled())return g._unsetRejectionIsUnhandled(),this._reject(g._reason());d=g._value()}this._reducingIndex=y+1,this._accum=d}else this._reducingIndex=y+1;this._reducingIndex<s||this._resolve(u?a:this._accum)}},e.prototype.reduce=function(t,e){return a(this,t,e,null)},e.reduce=function(t,e,r,n){return a(t,e,r,n)}}},{"./util.js":39}],32:[function(t,e){(function(t){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";var r,n;"object"==typeof t&&"string"==typeof t.version?r=function(e){t.nextTick(e)}:"undefined"!=typeof MutationObserver&&(n=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(n=WebKitMutationObserver)?(r=function(t){var e=document.createElement("div"),r=new n(t);return r.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},r.isStatic=!0):r="undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")},e.exports=r}).call(this,t("_process"))},{_process:40}],33:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r){function n(t){this.constructor$(t)}var i=e.PromiseInspection,o=t("./util.js");o.inherits(n,r),n.prototype._promiseResolved=function(t,e){this._values[t]=e;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},n.prototype._promiseFulfilled=function(t,e){var r=new i;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},n.prototype._promiseRejected=function(t,e){var r=new i;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},e.settle=function(t){return new n(t).promise()},e.prototype.settle=function(){return new n(this).promise()}}},{"./util.js":39}],34:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new i(t),o=r.promise();return o.isRejected()?o:(r.setHowMany(e),r.init(),o)}var s=t("./util.js"),a=t("./errors.js").RangeError,u=t("./errors.js").AggregateError,c=s.isArray;s.inherits(i,r),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._isResolved()||(this._howMany=t)},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new u,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":14,"./util.js":39}],35:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._isResolved()?t._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._settledValue},t.PromiseInspection=e}},{}],36:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r){function n(t){try{return t.then}catch(e){return c.e=e,c}}function i(t,i){if(l(t)){if(t instanceof e)return t;if(o(t)){var a=new e(r);return a._setTrace(void 0),t._then(a._fulfillUnchecked,a._rejectUncheckedCheckError,a._progressUnchecked,a,null),a}var h=n(t);if(h===c)return void 0!==i&&u(h.e)&&i._attachExtraTrace(h.e),e.reject(h.e);if("function"==typeof h)return s(t,h,i)}return t}function o(t){return h.call(t,"_promise0")}function s(t,r,n){function i(r){if(!l){if(l=!0,t===r){var i=e._makeSelfResolutionError();return void 0!==n&&n._attachExtraTrace(i),void c.promise._reject(i,void 0)}c.resolve(r)}}function o(t){if(!l){l=!0;var e=u(t)?t:new Error(a.toString(t));void 0!==n&&n._attachExtraTrace(e),c.promise._reject(t,e)}}function s(t){if(!l){var e=c.promise;"function"==typeof e._progress&&e._progress(t)}}var c=e.defer(),l=!1;try{r.call(t,i,o,s)}catch(h){if(!l){l=!0;var f=u(h)?h:new Error(a.toString(h));void 0!==n&&n._attachExtraTrace(f),c.promise._reject(h,f)}}return c.promise}var a=t("./util.js"),u=t("./errors.js").canAttachTrace,c=a.errorObj,l=a.isObject,h={}.hasOwnProperty;return i}},{"./errors.js":14,"./util.js":39}],37:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n){function i(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function o(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var s=(t("./util.js"),t("./errors.js")),a=(t("./errors_api_rejection")(e),e.TimeoutError),u=function(t,e){if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var r=new a(e);s.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r)}},c=function(t,e){e._fulfill(t)},l=e.delay=function(t,i){void 0===i&&(i=t,t=void 0),i=+i;var o=n(t,void 0),s=new e(r);return o instanceof e?(s._propagateFrom(o,7),s._follow(o._target()),s.then(function(t){return e.delay(t,i)})):(s._setTrace(void 0),setTimeout(function(){c(t,s)},i),s)};e.prototype.delay=function(t){return l(this,t)},e.prototype.timeout=function(t,n){var s=this._target();t=+t;var a=new e(r).cancellable();a._propagateFrom(this,7),a._follow(s);var c=setTimeout(function(){u(a,n)},t);return a._then(i,o,void 0,c,void 0)}}},{"./errors.js":14,"./errors_api_rejection":15,"./util.js":39}],38:[function(t,e){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";e.exports=function(e,r,n){function i(t){for(var r=t.length,n=0;r>n;++n){var i=t[n];if(i.isRejected())return e.reject(i.error());t[n]=i._settledValue}return t}function o(t){setTimeout(function(){throw t},0)}function s(t){var e=n(t,void 0);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function a(t,r){function i(){if(a>=u)return c.resolve();var l=s(t[a++]);if(l instanceof e&&l._isDisposable()){try{l=n(l._getDisposer().tryDispose(r),void 0)}catch(h){return o(h)}if(l instanceof e)return l._then(i,o,null,null,null)}i()}var a=0,u=t.length,c=e.defer();return i(),c.promise}function u(t){var e=new d;return e._settledValue=t,e._bitField=268435456,a(this,e).thenReturn(t)}function c(t){var e=new d;return e._settledValue=t,e._bitField=134217728,a(this,e).thenThrow(t)}function l(t,e){this._data=t,this._promise=e}function h(t,e){this.constructor$(t,e)}var f=t("./errors.js").TypeError,p=t("./util.js").inherits,d=e.PromiseInspection;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise()._isFulfilled()?this.promise()._value():null},l.prototype.tryDispose=function(t){var e=this.resource(),r=null!==e?this.doDispose(e,t):null;return this._promise._unsetDisposable(),this._data=this._promise=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},p(h,l),h.prototype.doDispose=function(t,e){var r=this.data();return r.call(t,t,e)},e.using=function(){var t=arguments.length;if(2>t)return r("you must pass at least 2 arguments to Promise.using");var n=arguments[t-1];if("function"!=typeof n)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");t--;for(var o=new Array(t),s=0;t>s;++s){var a=arguments[s];if(l.isDisposer(a)){var h=a;a=a.promise(),a._setDisposable(h)}o[s]=a}return e.settle(o).then(i).spread(n)._then(u,c,void 0,o,void 0)},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this._target());throw new f}}},{"./errors.js":14,"./util.js":39}],39:[function(t,e,r){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";function n(t,e,r){try{return t.call(e,r)}catch(n){return E.e=n,E}}function i(t,e,r,n){try{return t.call(e,r,n)}catch(i){return E.e=i,E}}function o(t,e,r,n,i){try{return t.call(e,r,n,i)}catch(o){return E.e=o,E}}function s(t,e,r,n,i,o){try{return t.call(e,r,n,i,o)}catch(s){return E.e=s,E}}function a(t,e,r){try{return t.apply(r,e)}catch(n){return E.e=n,E}}function u(t){return"string"==typeof t?t:""+t}function c(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function l(t){return!c(t)}function h(t){return c(t)?new Error(u(t)):t}function f(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;n>r;++r)i[r]=t[r];return i[r]=e,i}function p(t,e,r){if(!w.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function d(t,e,r){if(c(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return w.defineProperty(t,e,n),t}function _(t){throw t}function v(t){try{if("function"==typeof t){var e=w.keys(t.prototype);return e.length>0&&!(1===e.length&&"constructor"===e[0])}return!1}catch(r){return!1}}function y(t){function e(){}return e.prototype=t,e}function g(t){return R.test(t)}function m(t,e,r){for(var n=new Array(t),i=0;t>i;++i)n[i]=e+i+r;return n}function j(t){try{return t+""}catch(e){return"[no string representation]"}}var w=t("./es5.js"),b=function(){try{var t={};return w.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),F="undefined"==typeof navigator,E={e:{}},k=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},x=function(){return"string"!==this}.call("string"),T=function(){return w.isES5?function(t,e){for(var r=[],n=Object.create(null),i=Object(e).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=t;){var o;try{o=i(t)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!n[u]){n[u]=!0;var c=Object.getOwnPropertyDescriptor(t,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}t=w.getPrototypeOf(t)}return r}:function(t){var e=[];for(var r in t)e.push(r);return e}}(),R=/^[a-z$_][a-z$_0-9]*$/i,A={isClass:v,isIdentifier:g,inheritedDataKeys:T,getDataPropertyOrDefault:p,thrower:_,isArray:w.isArray,haveGetters:b,notEnumerableProp:d,isPrimitive:c,isObject:l,canEvaluate:F,errorObj:E,tryCatch1:n,tryCatch2:i,tryCatch3:o,tryCatch4:s,tryCatchApply:a,inherits:k,withAppended:f,asString:u,maybeWrapAsError:h,wrapsPrimitiveReceiver:x,toFastProperties:y,filledRange:m,toString:j,lastLineError:new Error};e.exports=A},{"./es5.js":16}],40:[function(t,e){function r(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var n=[];if(e){var i=document.createElement("div"),o=new MutationObserver(function(){var t=n.slice();n.length=0,t.forEach(function(t){t()})});return o.observe(i,{attributes:!0}),function(t){n.length||i.setAttribute("yes","no"),n.push(t)}}return r?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],41:[function(t,e){var r,n,i,o,s;o=t("bluebird"),s=t("./../../bower_components/underscore/underscore.js"),i=t("../../coffee-mixin/dest/mixin"),r=t("../../eventz/dest/eventz"),e.exports=n=function(){function t(t,e){this.opts=s.extend({},this.defaults,e),this.input=t,this.events()}return i.include(t,r),t.prototype.defaults={type:"dataURL"},t.prototype.setImgSrc=function(t){var e,r,n,i,s,a,u,c;for(i=[],c=t.target.files,s=function(t){return function(e){var r;return i.push(r=new o(function(r,n){var i;return i=new FileReader,i.onload=function(e){return t._imgSrcs||(t._imgSrcs=[]),t._imgSrcs.push(e.target.result),r(t)},i.onerror=function(t){switch(t.target.error.code){case t.target.error.NOT_FOUND_ERR:alert("File Not Found!");break;case t.target.error.NOT_READABLE_ERR:alert("File is not readable");break;case t.target.error.ABORT_ERR:break;default:alert("An error occurred reading this file.")}return n(new Error("An error occurred reading this file."))},i.readAsDataURL(e)}))}}(this),r=a=0,u=c.length;u>a;r=++a)e=c[r],e.type.match("image.*")&&s(e);return n=new o.all(i)},t.prototype.getImgSrc=function(){return this._imgSrcs},t.prototype.events=function(){return this.input.addEventListener("change",function(t){return function(e){return t.trigger("input:change",e)}}(this))},t}()},{"../../coffee-mixin/dest/mixin":3,"../../eventz/dest/eventz":4,"./../../bower_components/underscore/underscore.js":2,bluebird:7}],42:[function(t,e){var r,n;n=t("./../../bower_components/underscore/underscore.js"),e.exports=r=function(){function t(t){this.opts=n.extend({},this.defaults,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.events(),e=!0}var e;return e=!1,t.isRun=function(){return e},t.prototype.HALF_PI=Math.PI/2,t.prototype.TWO_PI=2*Math.PI,t.prototype.defaults={offsetRotation:0,offsetScale:1,offsetX:0,offsetY:0,radius:320,slices:10,zoom:1,interactive:!0,ease:.1},t.prototype.initStyle=function(){return this.canvas.style.position="absolute",this.canvas.style.marginLeft=-this.opts.radius+"px",this.canvas.style.marginTop=-this.opts.radius+"px",this.canvas.style.left="50%",this.canvas.style.top="50%",this},t.prototype.render=function(){var t;return t=document.getElementById("result"),t.appendChild(this.canvas),this},t.prototype.draw=function(){var t,e,r,n,i,o;for(this.canvas.width=this.canvas.height=2*this.opts.radius,this.context.fillStyle=this.context.createPattern(this.opts.image,"repeat"),r=this.opts.zoom*(this.opts.radius/Math.min(this.opts.image.width,this.opts.image.height)),n=this.TWO_PI/this.opts.slices,t=this.opts.image.width/2,e=i=0,o=this.opts.slices;o>=0?o>=i:i>=o;e=o>=0?++i:--i)this.context.save(),this.context.translate(this.opts.radius,this.opts.radius),this.context.rotate(e*n),this.context.beginPath(),this.context.moveTo(-.5,-.5),this.context.arc(0,0,this.opts.radius,n*-.51,.51*n),this.context.lineTo(.5,.5),this.context.closePath(),this.context.rotate(this.HALF_PI),this.context.scale(r,r),this.context.scale([-1,1][e%2],1),this.context.translate(this.opts.offsetX-t,this.opts.offsetY),this.context.rotate(this.opts.offsetRotation),this.context.scale(this.opts.offsetScale,this.opts.offsetScale),this.context.fill(),this.context.restore();return this},t.prototype.events=function(){var t,e,r;return this.opts.tx=this.opts.offsetX,this.opts.ty=this.opts.offsetY,this.opts.tr=this.opts.offsetRotation,t=function(t){return function(e){var r,n,i,o;return r=e.pageX/window.innerWidth,n=e.pageY/window.innerHeight,i=r-.5,o=n-.5,t.opts.tx=i*t.opts.radius*-2,t.opts.ty=o*t.opts.radius*2,t.opts.tr=Math.atan2(o,i)}}(this),e=function(t){return function(e){var r,n,i;return i=e.rotationRate,i.alpha,i.alpha>1?(r=Math.floor(i.alpha),n=r,t.opts.tx=n*t.opts.radius,t.opts.tr=Math.atan2(t.opts.ty,n)):void 0}}(this),window.addEventListener("mousemove",t),window.addEventListener("devicemotion",e),(r=function(t){return function(){var e,n;return t.opts.interactive&&(e=t.opts.tr-t.opts.offsetRotation,n=Math.atan2(Math.sin(e),Math.cos(e)),t.opts.offsetX+=(t.opts.tx-t.opts.offsetX)*t.opts.ease,t.opts.offsetY+=(t.opts.ty-t.opts.offsetY)*t.opts.ease,t.opts.offsetRotation+=(n-t.opts.offsetRotation)*t.opts.ease,t.draw()),setTimeout(r,1e3/60)}}(this))(),this},t}()},{"./../../bower_components/underscore/underscore.js":2}]},{},[1]);